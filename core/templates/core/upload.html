{% extends "core/base.html" %}
{% block content %}

<style>
/* Fullscreen overlay */
#upload-loading {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.75);
    backdrop-filter: blur(4px);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

/* Popup box */
.loading-box {
    background: white;
    padding: 24px 30px;
    border-radius: 14px;
    box-shadow: 0 4px 25px rgba(0,0,0,0.3);
    text-align: center;
    max-width: 280px;
}

.loading-box h3 {
    margin-bottom: 10px;
    font-size: 20px;
    color: #0f172a;
}

.loading-spinner {
    width: 38px;
    height: 38px;
    border: 4px solid #e2e8f0;
    border-top-color: #0ea5e9;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 15px auto;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
</style>

<!-- LOADING OVERLAY -->
<div id="upload-loading">
    <div class="loading-box">
        <h3>Processing your fileâ€¦</h3>
        <div class="loading-spinner"></div>
        <p style="font-size:14px;color:#475569;">This may take a few seconds.</p>
    </div>
</div>

<div class="card" style="max-width: 520px; margin: 40px auto;">
    <h2 class="glow-text">Upload a File</h2>

    <form id="upload-form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}

        <button type="submit" style="width:100%;">Upload</button>
    </form>
</div>

<script>
document.getElementById("upload-form").addEventListener("submit", function() {
    // Show the loading popup
    document.getElementById("upload-loading").style.display = "flex";
});
</script>

{% endblock %}
